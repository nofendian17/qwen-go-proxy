# =================================================================
# Qwen API Proxy - Environment Configuration
# =================================================================
# This file contains the configuration for the Qwen API proxy server.
# Copy this file to .env and modify values as needed for your environment.

# =================================================================
# SERVER CONFIGURATION
# =================================================================
# Host and port for the server to listen on
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# HTTP timeouts for read and write operations
READ_TIMEOUT=30s
WRITE_TIMEOUT=30s

# =================================================================
# QWEN OAUTH CONFIGURATION
# =================================================================
# Base URL for Qwen OAuth endpoints
QWEN_OAUTH_BASE_URL=https://chat.qwen.ai

# OAuth client ID for Qwen API authentication
QWEN_OAUTH_CLIENT_ID=f0304373b74a44d2b584a3fb70ca9e56

# OAuth scope for API access (space-separated)
QWEN_OAUTH_SCOPE=openid profile email model.completion

# OAuth device authorization URL
QWEN_OAUTH_DEVICE_AUTH_URL=https://chat.qwen.ai/api/v1/oauth2/device/code

# =================================================================
# STORAGE & CREDENTIALS
# =================================================================
# Directory to store OAuth credentials and other data
QWEN_DIR=.qwen

# =================================================================
# TOKEN MANAGEMENT
# =================================================================
# Buffer time before token refresh (e.g., 5m, 10m, 1h)
# This should be a duration string (Go duration format)
TOKEN_REFRESH_BUFFER=5m

# =================================================================
# API CONFIGURATION
# =================================================================
# Fallback API endpoint if not provided by credentials
API_BASE_URL=https://portal.qwen.ai/v1

# =================================================================
# SERVER LIFECYCLE
# =================================================================
# Timeout for graceful server shutdown
SHUTDOWN_TIMEOUT=30s

# =================================================================
# LOGGING CONFIGURATION
# =================================================================
# Enable debug mode for detailed logging
DEBUG_MODE=true

# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=debug

# Log format: json or text (default: json)
LOG_FORMAT=json

# =================================================================
# RATE LIMITING
# =================================================================
# Maximum requests per second per IP address
RATE_LIMIT_RPS=10

# Maximum burst requests allowed per IP address
RATE_LIMIT_BURST=20

# =================================================================
# SECURITY CONFIGURATION
# =================================================================
# Comma-separated list of trusted proxy IPs for proper IP detection
# Leave empty to trust all proxies (not recommended for production)
TRUSTED_PROXIES=

# Enable TLS/HTTPS (requires TLS_CERT_FILE and TLS_KEY_FILE)
ENABLE_TLS=false

# TLS certificate file path (required if ENABLE_TLS=true)
TLS_CERT_FILE=

# TLS private key file path (required if ENABLE_TLS=true)
TLS_KEY_FILE=

# =================================================================
# PRODUCTION RECOMMENDATIONS
# =================================================================
# For production deployment, consider these additional settings:
#
# 1. Set DEBUG_MODE=false
# 2. Set LOG_LEVEL=info or warn
# 3. Configure TRUSTED_PROXIES with your load balancer IPs
# 4. Enable TLS with proper certificates
# 5. Use environment-specific QWEN_OAUTH_CLIENT_ID
# 6. Set up proper secrets management for credentials
#
# Example production settings:
# DEBUG_MODE=false
# LOG_LEVEL=info
# TRUSTED_PROXIES=10.0.0.1,10.0.0.2
# ENABLE_TLS=true
# TLS_CERT_FILE=/path/to/cert.pem
# TLS_KEY_FILE=/path/to/key.pem
